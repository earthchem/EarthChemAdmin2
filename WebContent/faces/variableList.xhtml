
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets"> 

<p:dialog header="" widgetVar="variableDialog" width="900" height="500" resizable="false"> 
 <ui:fragment><ui:include src="variableDialog.xhtml" /></ui:fragment>
</p:dialog>


<h:form id="variableListForm">
<h:panelGroup >
<h:panelGrid columns = "3" border = "0" cellpadding = "0" cellspacing = "3">
  <p:outputLabel value="Type: "/>
      <p:selectOneMenu value="#{variableBean.typeNum}">  
	       <p:ajax listener="#{variableBean.selectListType}" update="variableListForm"/>
	          <f:selectItem itemLabel="Select One" itemValue="#{null}" />
	           <f:selectItem itemLabel="All" itemValue="0" />
		     <f:selectItems value="#{optionBean.variableTypes}" /> 
	</p:selectOneMenu> 
<p:commandButton value="New">
		  <p:ajax listener="#{variableBean.createNew}"  update=":eca:variableEditForm"  oncomplete="PF('variableDialog').show()"/>
</p:commandButton>
</h:panelGrid>
<p:dataTable widgetVar="variableTableWidgetVar" id="variableTable" var="cc" value="#{variableBean.variableList}"  scrollable="true" scrollHeight="400"  cellpadding = "0" cellspacing = "0"
selectionMode="single" selection="#{variableBean.variable}" rowKey="#{cc.variableNum}">  

<p:ajax event="rowSelect" listener="#{variableBean.selectVariable}" update=":eca:variableEditForm"  oncomplete="PF('variableDialog').show()" /> 
   	<p:column headerText="Number" sortBy="#{cc.variableNum}" filterBy="#{cc.variableNum}" style="width:9%;"> <h:outputText value="#{cc.variableNum}"/></p:column>
 		<p:column headerText="Code" sortBy="#{cc.variableCode}" filterBy="#{cc.variableCode}" style="width:15%;" >  <h:outputText value="#{cc.variableCode}"/> </p:column>
 		<p:column headerText="Name" sortBy="#{cc.variableName}" filterBy="#{cc.variableName}" style="width:15%;" >  <h:outputText value="#{cc.variableName}"/> </p:column>
 		<p:column headerText="Type" sortBy="#{cc.variableTypeCode}" filterBy="#{cc.variableTypeCode}" style="width:15%;" >  <h:outputText value="#{cc.variableTypeCode}"/> </p:column>	
 		<p:column headerText="Display Order" sortBy="#{cc.displayOrder}" filterBy="#{cc.displayOrder}" style="width:10%;" >  <h:outputText value="#{cc.displayOrder}"/> </p:column>		
    	<p:column headerText="Definition" sortBy="#{cc.variableDefinition}" style="width:30%;" >  <h:outputText value="#{cc.variableDefinition}"/> </p:column>

</p:dataTable>	
</h:panelGroup>

</h:form>

</ui:composition>
 